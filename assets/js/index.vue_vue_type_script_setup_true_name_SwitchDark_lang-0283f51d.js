import{s as e}from"./pinia@2.0.33_typescript@5.0.4_vue@3.2.47-b4bca346.js";import{b as t,D as r}from"./index-6214238a.js";import{a as o}from"./element-plus@2.4.2_vue@3.2.47-cedc29d1.js";import{R as l,S as n}from"./@element-plus_icons-vue@2.1.0_vue@3.2.47-b4249e9e.js";import{e as a,Z as i,o as c,P as s}from"./@vue_runtime-core@3.2.47-ac740756.js";import{u}from"./@vue_reactivity@3.2.47-31538bbf.js";function m(e){let t="";if(!/^\#?[0-9A-Fa-f]{6}$/.test(e))return o.warning("输入错误的hex");t=(e=e.replace("#","")).match(/../g);for(let r=0;r<3;r++)t[r]=parseInt(t[r],16);return t}function f(e,t,r){let l=/^\d{1,3}$/;if(!l.test(e)||!l.test(t)||!l.test(r))return o.warning("输入错误的rgb颜色值");let n=[e.toString(16),t.toString(16),r.toString(16)];for(let o=0;o<3;o++)1==n[o].length&&(n[o]=`0${n[o]}`);return`#${n.join("")}`}function v(e,t){if(!/^\#?[0-9A-Fa-f]{6}$/.test(e))return o.warning("输入错误的hex颜色值");let r=m(e);for(let o=0;o<3;o++)r[o]=Math.round(20.5*t+r[o]*(1-t));return f(r[0],r[1],r[2])}function d(e,t){if(!/^\#?[0-9A-Fa-f]{6}$/.test(e))return o.warning("输入错误的hex颜色值");let r=m(e);for(let o=0;o<3;o++)r[o]=Math.round(255*t+r[o]*(1-t));return f(r[0],r[1],r[2])}const g={light:{"--el-logo-text-color":"#303133","--el-menu-bg-color":"#ffffff","--el-menu-hover-bg-color":"#cccccc","--el-menu-active-bg-color":"var(--el-color-primary-light-9)","--el-menu-text-color":"#333333","--el-menu-active-color":"var(--el-color-primary)","--el-menu-hover-text-color":"#333333","--el-menu-horizontal-sub-item-height":"55px"},inverted:{"--el-logo-text-color":"#dadada","--el-menu-bg-color":"#191a20","--el-menu-hover-bg-color":"#000000","--el-menu-active-bg-color":"#000000","--el-menu-text-color":"#bdbdc0","--el-menu-active-color":"#ffffff","--el-menu-hover-text-color":"#ffffff","--el-menu-horizontal-sub-item-height":"55px"},dark:{"--el-logo-text-color":"#dadada","--el-menu-bg-color":"#141414","--el-menu-hover-bg-color":"#000000","--el-menu-active-bg-color":"#000000","--el-menu-text-color":"#bdbdc0","--el-menu-active-color":"#ffffff","--el-menu-hover-text-color":"#ffffff","--el-menu-horizontal-sub-item-height":"55px"}},h=()=>{const l=t(),{primary:n,isDark:a,isGrey:i,isWeak:c,asideInverted:s,layout:u}=e(l),m=()=>{const e=document.documentElement;a.value?e.setAttribute("class","dark"):e.setAttribute("class",""),f(n.value),p()},f=e=>{e||(e=r,o({type:"success",message:`主题颜色已重置为 ${r}`})),document.documentElement.style.setProperty("--el-color-primary",e),document.documentElement.style.setProperty("--el-color-primary-dark-2",a.value?`${d(e,.2)}`:`${v(e,.3)}`);for(let t=1;t<=9;t++){const r=a.value?`${v(e,t/10)}`:`${d(e,t/10)}`;document.documentElement.style.setProperty(`--el-color-primary-light-${t}`,r)}l.setGlobalState("primary",e)},h=(e,t)=>{const r=document.body;if(!t)return r.removeAttribute("style");r.setAttribute("style",{grey:"filter: grayscale(1)",weak:"filter: invert(80%)"}[e]);const o="grey"===e?"isWeak":"isGrey";l.setGlobalState(o,!1)},p=()=>{let e="light";"transverse"==u.value&&(e="inverted"),"vertical"==u.value&&s.value&&(e="inverted"),a.value&&(e="dark");const t=g[e];for(const[r,o]of Object.entries(t))document.documentElement.style.setProperty(r,o)};a.value&&m();return{initTheme:()=>{m(),i.value&&h("grey",!0),c.value&&h("weak",!0)},switchDark:m,changePrimary:f,changeGreyOrWeak:h,setAsideTheme:p}},p=a({name:"SwitchDark"}),y=a({...p,setup(e){const{switchDark:r}=h(),o=t();return(e,t)=>{const a=i("el-switch");return c(),s(a,{modelValue:u(o).isDark,"onUpdate:modelValue":t[0]||(t[0]=e=>u(o).isDark=e),onChange:u(r),"inline-prompt":"","active-icon":u(l),"inactive-icon":u(n)},null,8,["modelValue","onChange","active-icon","inactive-icon"])}}});export{y as _,h as u};
