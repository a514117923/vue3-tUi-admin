import{v as e,T as t,w as a}from"./@vue_runtime-dom@3.2.47-7b31c7d0.js";import{d as l,s as n}from"./pinia@2.0.33_typescript@5.0.4_vue@3.2.47-b4bca346.js";import{u as s,m as o}from"./indexAsync-b88cc738.js";import{e as i,Z as u,o as r,a as c,c as d,Q as m,P as p,J as f,y as v,b as _,F as b,n as h,D as k,t as w,q as g,f as y,X as C,R as x,z as A,G as L,U as M,a1 as T,am as N,al as j}from"./@vue_runtime-core@3.2.47-ac740756.js";import{_ as R,r as S,p as I,H as K,b as P,u as V}from"./index-e82716fb.js";import{S as z}from"./sortablejs@1.15.0-c3bad686.js";import{b as D,u as E}from"./vue-router@4.1.6_vue@3.2.47-86cdb6f8.js";import{O as B,s as $,q as F}from"./@vue_shared@3.2.47-177e1703.js";import{r as G,u as U,i as q}from"./@vue_reactivity@3.2.47-31538bbf.js";import{m as O}from"./@vueuse_shared@9.13.0_vue@3.2.47-0dc8a1ce.js";import{u as H}from"./vue-i18n@9.2.2_vue@3.2.47-cb4378dc.js";import{M as Q}from"./@element-plus_icons-vue@2.1.0_vue@3.2.47-036cf3d1.js";import{i as W}from"./@vueuse_core@9.13.0_vue@3.2.47-6bbd1caf.js";import{_ as X}from"./logo-05fb951c.js";import{q as Y}from"./vite-plugin-qiankun@1.0.15_typescript@5.0.4_vite@4.3.9-f25e2b71.js";import{b as J,a as Z}from"./element-plus@2.3.3_vue@3.2.47-8ae64a1b.js";const ee=l({id:"wocwin-keepAlive",state:()=>({keepAliveName:[]}),actions:{
// Add KeepAliveName
async addKeepAliveName(e){!this.keepAliveName.includes(e)&&this.keepAliveName.push(e)},
// Remove KeepAliveName
async removeKeepAliveName(e){this.keepAliveName=this.keepAliveName.filter((t=>t!==e))},
// Set KeepAliveName
async setKeepAliveName(e=[]){this.keepAliveName=e}}}),te=R(i({__name:"Maximize",setup(e){const t=s(),a=()=>{t.setGlobalState("maximize",!1)};return(e,t)=>{const l=u("Close"),n=u("el-icon");return r(),c("div",{class:"maximize",onClick:a},[d(n,null,{default:m((()=>[d(l)])),_:1})])}}}),[["__scopeId","data-v-e5bd432e"]]),ae=l({id:"wocwin-tabs",state:()=>({tabsMenuList:[]}),actions:{
// Add Tabs
async addTabs(e){this.tabsMenuList.every((t=>t.path!==e.path))&&this.tabsMenuList.push(e)},
// Remove Tabs
async removeTabs(e,t=!0){const a=this.tabsMenuList;t&&a.forEach(((t,l)=>{if(t.path!==e)return;const n=a[l+1]||a[l-1];n&&S.push(n.path)})),this.tabsMenuList=a.filter((t=>t.path!==e))},
// Close MultipleTab
async closeMultipleTab(e){this.tabsMenuList=this.tabsMenuList.filter((t=>t.path===e||!t.close))},
// Set Tabs
async setTabs(e){this.tabsMenuList=e},
// Set Tabs Title
async setTabsTitle(e){const t=location.hash.substring(1);this.tabsMenuList.forEach((a=>{a.path==t&&(a.title=e)}))}},persist:I("wocwin-tabs")}),le=i({__name:"MoreButton",setup(e){const t=D(),a=E(),l=ae(),n=ee(),s=()=>{t.meta.isAffix||(l.removeTabs(t.fullPath),n.removeKeepAliveName(t.name))},o=()=>{l.closeMultipleTab(t.fullPath),n.setKeepAliveName([t.name])},i=()=>{l.closeMultipleTab(),n.setKeepAliveName(),a.push(K)};return(e,t)=>{const a=u("ArrowDown"),l=u("el-icon"),n=u("Remove"),c=u("el-dropdown-item"),v=u("CircleClose"),_=u("FolderDelete"),b=u("el-dropdown-menu"),h=u("el-dropdown");return r(),p(h,{trigger:"click",teleported:!1},{dropdown:m((()=>[d(b,null,{default:m((()=>[d(c,{onClick:s},{default:m((()=>[d(l,null,{default:m((()=>[d(n)])),_:1}),f(B(e.$t("tabs.closeCurrent")),1)])),_:1}),d(c,{onClick:o},{default:m((()=>[d(l,null,{default:m((()=>[d(v)])),_:1}),f(B(e.$t("tabs.closeOther")),1)])),_:1}),d(c,{onClick:i},{default:m((()=>[d(l,null,{default:m((()=>[d(_)])),_:1}),f(B(e.$t("tabs.closeAll")),1)])),_:1})])),_:1})])),default:m((()=>[d(l,null,{default:m((()=>[d(a)])),_:1})])),_:1})}}}),ne=i({__name:"Refresh",setup(e){const t=D(),a=ee(),l=v("refresh"),n=()=>{setTimeout((()=>{a.removeKeepAliveName(t.name),l(!1),h((()=>{a.addKeepAliveName(t.name),l(!0)}))}),0)};return(e,t)=>{const a=u("el-divider"),l=u("Refresh",!0),s=u("el-icon"),o=u("el-tooltip");return r(),c(b,null,[d(a,{direction:"vertical"}),_("div",{onClick:n,class:"tabs_icon"},[d(o,{effect:"dark",content:e.$t("tabs.refresh"),placement:"bottom"},{default:m((()=>[d(s,null,{default:m((()=>[d(l)])),_:1})])),_:1},8,["content"])]),d(a,{direction:"vertical"})],64)}}}),se=i({__name:"Maximize",setup(e){const t=s(),a=()=>{t.setGlobalState("maximize",!0)};return(e,t)=>{const l=u("el-divider"),n=u("FullScreen"),s=u("el-icon"),o=u("el-tooltip");return r(),c(b,null,[d(l,{direction:"vertical"}),_("div",{onClick:a,class:"tabs_icon"},[d(o,{effect:"dark",content:e.$t("tabs.maximize"),placement:"bottom"},{default:m((()=>[d(s,null,{default:m((()=>[d(n)])),_:1})])),_:1},8,["content"])])],64)}}}),oe=i({__name:"Contextmenu",props:{visible:{type:Boolean,required:!1},top:{type:Number,default:0},left:{type:Number,default:0}},setup(t){const a=D(),l=E(),n=ae(),s=ee(),o=()=>{a.meta.isAffix||(n.removeTabs(a.fullPath),s.removeKeepAliveName(a.name))},i=()=>{n.closeMultipleTab(a.fullPath),s.setKeepAliveName([a.name])},p=()=>{n.closeMultipleTab(),s.setKeepAliveName(),l.push(K)};return(a,l)=>{const n=u("Remove"),s=u("el-icon"),v=u("CircleClose"),b=u("FolderDelete");return k((r(),c("ul",{style:$({left:t.left+"px",top:t.top+"px"}),class:"contextmenu"},[_("li",{onClick:o},[d(s,null,{default:m((()=>[d(n)])),_:1}),f(B(a.$t("tabs.closeCurrent")),1)]),_("li",{onClick:i},[d(s,null,{default:m((()=>[d(v)])),_:1}),f(B(a.$t("tabs.closeOther")),1)]),_("li",{onClick:p},[d(s,null,{default:m((()=>[d(b)])),_:1}),f(B(a.$t("tabs.closeAll")),1)])],4)),[[e,t.visible]])}}}),ie={class:"tabs-box"},ue={class:"tabs-menu"},re={class:"right-tag"},ce=R(i({__name:"index",setup(t){const a=D(),l=E(),n=ae(),o=P(),i=s(),v=ee(),h=G(a.fullPath),A=w((()=>n.tabsMenuList)),L=w((()=>i.tabsIcon)),M=G(!1),T=G(0),N=G(0),j=()=>{M.value=!1};g(M,(e=>{e?document.body.addEventListener("click",j):document.body.removeEventListener("click",j)})),y((()=>{R(),S()})),g((()=>a.fullPath),(()=>{if(a.meta.isFull)return;h.value=a.fullPath;const e={icon:a.meta.icon,title:a.meta.title,path:a.fullPath,name:a.name,close:!a.meta.isAffix};n.addTabs(e),a.meta.isKeepAlive&&v.addKeepAliveName(a.name)}),{immediate:!0});const R=()=>{z.create(document.querySelector(".el-tabs__nav"),{draggable:".el-tabs__item",animation:300,onEnd({newIndex:e,oldIndex:t}){const a=[...n.tabsMenuList],l=a.splice(t,1)[0];a.splice(e,0,l),n.setTabs(a)}})},S=()=>{o.flatMenuListGet.forEach((e=>{if(e.meta.isAffix&&!e.meta.isHide&&!e.meta.isFull){const t={icon:e.meta.icon,title:e.meta.title,path:e.path,name:e.name,close:!e.meta.isAffix};n.addTabs(t)}}))},I=e=>{const t=e.props.name;l.push(t)},K=e=>{const t=n.tabsMenuList.filter((t=>t.path==e))[0].name||"";v.removeKeepAliveName(t),n.removeTabs(e,e==a.fullPath)};return(t,a)=>{const l=u("el-icon"),n=u("el-tab-pane"),s=u("el-tabs");return r(),c("div",ie,[_("div",ue,[d(s,{modelValue:U(h),"onUpdate:modelValue":a[0]||(a[0]=e=>q(h)?h.value=e:null),type:"card",onTabClick:I,onContextmenu:a[1]||(a[1]=e=>(e=>{e.preventDefault();const{clientX:t,clientY:a}=e;N.value=t,T.value=a+5,A.value.length<2?M.value=!1:M.value=!0})(e)),onTabRemove:K},{default:m((()=>[(r(!0),c(b,null,C(U(A),(t=>(r(),p(n,{key:t.path,label:t.title,name:t.path,closable:t.close},{label:m((()=>[k(d(l,{class:"tabs-icon"},{default:m((()=>[(r(),p(x(t.icon)))])),_:2},1536),[[e,t.icon&&U(L)]]),f(" "+B(t.title),1)])),_:2},1032,["label","name","closable"])))),128))])),_:1},8,["modelValue"]),_("div",re,[d(ne),d(le,{class:"tabs_icon"}),d(se)])]),d(oe,{visible:U(M),left:U(N),top:U(T)},null,8,["visible","left","top"])])}}}),[["__scopeId","data-v-d1ba5e45"]]),de=R(i({__name:"index",setup(e){const a=s(),{maximize:l,isCollapse:o,layout:i,tabs:f}=n(a),v=ee(),{keepAliveName:_}=n(v),h=G(!0);A("refresh",(e=>h.value=e)),g((()=>l.value),(()=>{const e=document.getElementById("app");l.value?e.classList.add("main-maximize"):e.classList.remove("main-maximize")}),{immediate:!0}),g((()=>i.value),(()=>{document.body.setAttribute("class",i.value)}),{immediate:!0});const k=G(0),w=O((()=>{k.value=document.body.clientWidth,!o.value&&k.value<1200&&a.setGlobalState("isCollapse",!0),o.value&&k.value>1200&&a.setGlobalState("isCollapse",!1)}),100);return window.addEventListener("resize",w,!1),L((()=>{window.removeEventListener("resize",w)})),(e,a)=>{const n=u("router-view"),s=u("el-main");return r(),c(b,null,[U(l)?(r(),p(te,{key:0})):M("",!0),U(f)?(r(),p(ce,{key:1})):M("",!0),d(s,null,{default:m((()=>[d(n,null,{default:m((({Component:e,route:a})=>[d(t,{appear:"",name:"fade-transform",mode:"out-in"},{default:m((()=>[(r(),p(T,{include:U(_)},[h.value?(r(),p(x(e),{key:a.fullPath})):M("",!0)],1032,["include"]))])),_:2},1024)])),_:1})])),_:1})],64)}}}),[["__scopeId","data-v-2908a6ab"]]),me=i({__name:"Language",setup(e){const t=H(),a=s(),l=w((()=>a.language)),n=[{label:"简体中文",value:"zh"},{label:"English",value:"en"}],o=e=>{t.locale.value=e,a.setGlobalState("language",e)};return(e,t)=>{const a=u("el-dropdown-item"),s=u("el-dropdown-menu"),i=u("el-dropdown");return r(),p(i,{trigger:"click",onCommand:o},{dropdown:m((()=>[d(s,null,{default:m((()=>[(r(),c(b,null,C(n,(e=>d(a,{key:e.value,command:e.value,disabled:U(l)===e.value},{default:m((()=>[f(B(e.label),1)])),_:2},1032,["command","disabled"]))),64))])),_:1})])),default:m((()=>[_("i",{class:F(["iconfont icon-zhongyingwen","toolBar-icon"])})])),_:1})}}}),pe={class:"menu-search-dialog"},fe=R(i({__name:"SearchMenu",setup(e){const t=E(),l=P(),n=w((()=>l.flatMenuListGet.filter((e=>!e.meta.isHide)))),s=(e,t)=>{t(e?n.value.filter(k(e)):n.value)},o=G(!1),i=G(),f=G(""),v=()=>{o.value=!0,h((()=>{setTimeout((()=>{i.value.focus()}))}))},b=()=>{o.value=!1},k=e=>t=>t.path.toLowerCase().indexOf(e.toLowerCase())>-1||t.meta.title.toLowerCase().indexOf(e.toLowerCase())>-1,g=e=>{f.value="",e.meta.isLink?window.open(e.meta.isLink,"_blank"):t.push(e.path),b()};return(e,t)=>{const l=u("el-icon"),n=u("el-autocomplete"),h=u("el-dialog");return r(),c("div",pe,[_("i",{onClick:v,class:F(["iconfont icon-search","toolBar-icon"])}),d(h,{modelValue:o.value,"onUpdate:modelValue":t[2]||(t[2]=e=>o.value=e),"destroy-on-close":"",modal:!1,"show-close":!1,fullscreen:"",onClick:b},{default:m((()=>[d(n,{modelValue:f.value,"onUpdate:modelValue":t[0]||(t[0]=e=>f.value=e),ref_key:"menuInputRef",ref:i,"value-key":"path",placeholder:"菜单搜索 ：支持菜单名称、路径","fetch-suggestions":s,onSelect:g,onClick:t[1]||(t[1]=a((()=>{}),["stop"]))},{prefix:m((()=>[d(l,null,{default:m((()=>[d(U(Q))])),_:1})])),default:m((({item:e})=>[d(l,null,{default:m((()=>[(r(),p(x(e.meta.icon)))])),_:2},1024),_("span",null,B(e.meta.title),1)])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-d5ac5f14"]]),ve={class:"theme-setting",style:{cursor:"pointer"}},_e=i({__name:"ThemeSetting",setup(e){const t=()=>{o.emit("openThemeDrawer")};return(e,a)=>(r(),c("div",ve,[_("i",{class:F(["iconfont icon-theme","toolBar-icon"]),onClick:t})]))}}),be={class:"fullscreen icon_full"},he=R(i({__name:"Fullscreen",setup(e){const{toggle:t,isFullscreen:a}=W();return(e,l)=>(r(),c("div",be,[_("i",{class:F([["iconfont",U(a)?"icon-exitfullscreen":"icon-fullscreen"],"toolBar-icon"]),onClick:l[0]||(l[0]=//@ts-ignore
(...e)=>U(t)&&U(t)(...e))},null,2)]))}}),[["__scopeId","data-v-f50f3430"]]),ke=_("span",null,"This is userInfo",-1),we={class:"dialog-footer"},ge=i({__name:"InfoDialog",setup(e,{expose:t}){const a=G(!1);return t({openDialog:()=>{a.value=!0}}),(e,t)=>{const l=u("el-button"),n=u("el-dialog");return r(),p(n,{modelValue:a.value,"onUpdate:modelValue":t[2]||(t[2]=e=>a.value=e),title:"个人信息",width:"500px",draggable:""},{footer:m((()=>[_("span",we,[d(l,{onClick:t[0]||(t[0]=e=>a.value=!1)},{default:m((()=>[f("取消")])),_:1}),d(l,{type:"primary",onClick:t[1]||(t[1]=e=>a.value=!1)},{default:m((()=>[f("确认")])),_:1})])])),default:m((()=>[ke])),_:1},8,["modelValue"])}}}),ye=_("span",null,"This is Password",-1),Ce={class:"dialog-footer"},xe=i({__name:"PasswordDialog",setup(e,{expose:t}){const a=G(!1);return t({openDialog:()=>{a.value=!0}}),(e,t)=>{const l=u("el-button"),n=u("el-dialog");return r(),p(n,{modelValue:a.value,"onUpdate:modelValue":t[2]||(t[2]=e=>a.value=e),title:"修改密码",width:"500px",draggable:""},{footer:m((()=>[_("span",Ce,[d(l,{onClick:t[0]||(t[0]=e=>a.value=!1)},{default:m((()=>[f("取消")])),_:1}),d(l,{type:"primary",onClick:t[1]||(t[1]=e=>a.value=!1)},{default:m((()=>[f("确认")])),_:1})])])),default:m((()=>[ye])),_:1},8,["modelValue"])}}}),Ae=e=>(N("data-v-0b58b9bb"),e=e(),j(),e),Le=Ae((()=>_("div",{class:"avatar"},[
_("img",{src:X,alt:"avatar"})],-1))),Me=Ae((()=>_("a",{href:"https://wocwin.github.io/t-ui/",target:"_blank"},"vue2基础组件文档",-1))),Te=Ae((()=>_("a",{href:"https://wocwin.github.io/t-ui-plus/",target:"_blank"},"vue3基础组件文档",-1))),Ne=R(i({__name:"Avatar",setup(e){const t=V(),a=()=>{J.confirm("您是否确认退出登录?","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{await t.LogOut(),window.location.href=Y.__POWERED_BY_QIANKUN__?"/wocwin-qiankun/":"/wocwin-admin/",Z.success("退出登录成功！")}))},l=G(null),n=G(null),s=e=>{var t,a;"infoRef"==e&&(null==(t=l.value)||t.openDialog()),"passwordRef"==e&&(null==(a=n.value)||a.openDialog())};return(e,t)=>{const o=u("User"),i=u("el-icon"),p=u("el-dropdown-item"),v=u("Edit"),_=u("Memo"),h=u("SwitchButton"),k=u("el-dropdown-menu"),w=u("el-dropdown");return r(),c(b,null,[d(w,{trigger:"click"},{dropdown:m((()=>[d(k,{class:"user_info"},{default:m((()=>[d(p,{onClick:t[0]||(t[0]=e=>s("infoRef"))},{default:m((()=>[d(i,null,{default:m((()=>[d(o)])),_:1}),f(" "+B(e.$t("header.personalData")),1)])),_:1}),d(p,{onClick:t[1]||(t[1]=e=>s("passwordRef"))},{default:m((()=>[d(i,null,{default:m((()=>[d(v)])),_:1}),f(" "+B(e.$t("header.changePassword")),1)])),_:1}),d(p,null,{default:m((()=>[d(i,null,{default:m((()=>[d(_)])),_:1}),Me])),_:1}),d(p,null,{default:m((()=>[d(i,null,{default:m((()=>[d(_)])),_:1}),Te])),_:1}),d(p,{onClick:a,divided:""},{default:m((()=>[d(i,null,{default:m((()=>[d(h)])),_:1}),f(" "+B(e.$t("header.logout")),1)])),_:1})])),_:1})])),default:m((()=>[Le])),_:1}),d(ge,{ref_key:"infoRef",ref:l},null,512),d(xe,{ref_key:"passwordRef",ref:n},null,512)],64)}}}),[["__scopeId","data-v-0b58b9bb"]]),je={class:"tool-bar-ri"},Re={class:"header-icon"},Se={class:"username"},Ie=R(i({__name:"ToolBarRight",setup(e){const t=V(),a=w((()=>t.name||"wocwin"));return(e,t)=>{const l=u("el-tooltip");return r(),c("div",je,[_("div",Re,[d(me,{id:"language"}),d(fe,{id:"searchMenu"}),d(l,{content:"主题切换",effect:"dark",placement:"bottom"},{default:m((()=>[d(_e,{id:"themeSetting"})])),_:1}),d(l,{content:"全屏预览",effect:"dark",placement:"bottom"},{default:m((()=>[d(he,{id:"fullscreen"})])),_:1})]),_("span",Se,B(U(a)),1),d(Ne)])}}}),[["__scopeId","data-v-66569b01"]]),Ke={class:"sle"},Pe={class:"sle"},Ve=i({__name:"SubMenu",props:{menuList:null},setup(e){const t=E();return(a,l)=>{const n=u("el-icon"),s=u("SubMenu",!0),o=u("el-sub-menu"),i=u("el-menu-item");return r(!0),c(b,null,C(e.menuList,(e=>{var a;return r(),c(b,{key:e.path},[(null==(a=e.children)?void 0:a.length)?(r(),p(o,{key:0,index:e.path},{title:m((()=>[d(n,null,{default:m((()=>[(r(),p(x(e.meta.icon)))])),_:2},1024),_("span",Ke,B(e.meta.title),1)])),default:m((()=>[d(s,{menuList:e.children},null,8,["menuList"])])),_:2},1032,["index"])):(r(),p(i,{key:1,index:e.path,onClick:a=>(e=>{if(e.meta.isLink)return window.open(e.meta.isLink,"_blank");t.push(e.path)})(e)},{title:m((()=>[_("span",Pe,B(e.meta.title),1)])),default:m((()=>[d(n,null,{default:m((()=>[(r(),p(x(e.meta.icon)))])),_:2},1024)])),_:2},1032,["index","onClick"]))],64)})),128)}}});export{de as M,Ie as T,Ve as _};
