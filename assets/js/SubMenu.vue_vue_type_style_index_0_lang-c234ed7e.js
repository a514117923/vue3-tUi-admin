import{v as e,T as t,w as a}from"./@vue_runtime-dom@3.2.47-7b31c7d0.js";import{d as l,s as n}from"./pinia@2.0.33_typescript@5.0.4_vue@3.2.47-b4bca346.js";import{a as s}from"./index.vue_vue_type_script_setup_true_name_SwitchDark_lang-c9cc084e.js";import{e as o,Z as i,o as u,a as r,c,Q as d,P as m,J as p,y as f,b as v,F as _,n as b,D as h,t as k,q as w,f as g,X as y,R as x,z as C,G as A,U as L,a1 as M,am as T,al as N}from"./@vue_runtime-core@3.2.47-ac740756.js";import{_ as j,r as S,p as D,H as R,b as I,u as K}from"./index-1540babf.js";import{S as P}from"./sortablejs@1.15.0-c3bad686.js";import{b as V,u as z}from"./vue-router@4.1.6_vue@3.2.47-86cdb6f8.js";import{O as B,s as E,q as $}from"./@vue_shared@3.2.47-177e1703.js";import{r as F,u as G,i as U}from"./@vue_reactivity@3.2.47-31538bbf.js";import{m as q}from"./@vueuse_shared@9.13.0_vue@3.2.47-0dc8a1ce.js";import{u as O}from"./vue-i18n@9.2.2_vue@3.2.47-cb4378dc.js";import{M as H}from"./@element-plus_icons-vue@2.1.0_vue@3.2.47-b4249e9e.js";import{m as Q}from"./indexAsync-937abe3c.js";import{i as W}from"./@vueuse_core@9.13.0_vue@3.2.47-6bbd1caf.js";import{_ as X}from"./logo-05fb951c.js";import{q as Y}from"./vite-plugin-qiankun@1.0.15_typescript@5.0.4_vite@4.3.9-f25e2b71.js";import{b as J,a as Z}from"./element-plus@2.3.3_vue@3.2.47-4dea348c.js";const ee=l({id:"wocwin-keepAlive",state:()=>({keepAliveName:[]}),actions:{
// Add KeepAliveName
async addKeepAliveName(e){!this.keepAliveName.includes(e)&&this.keepAliveName.push(e)},
// Remove KeepAliveName
async removeKeepAliveName(e){this.keepAliveName=this.keepAliveName.filter((t=>t!==e))},
// Set KeepAliveName
async setKeepAliveName(e=[]){this.keepAliveName=e}}}),te=j(o({__name:"Maximize",setup(e){const t=s(),a=()=>{t.setGlobalState("maximize",!1)};return(e,t)=>{const l=i("Close"),n=i("el-icon");return u(),r("div",{class:"maximize",onClick:a},[c(n,null,{default:d((()=>[c(l)])),_:1})])}}}),[["__scopeId","data-v-e5bd432e"]]),ae=l({id:"wocwin-tabs",state:()=>({tabsMenuList:[]}),actions:{
// Add Tabs
async addTabs(e){this.tabsMenuList.every((t=>t.path!==e.path))&&this.tabsMenuList.push(e)},
// Remove Tabs
async removeTabs(e,t=!0){const a=this.tabsMenuList;t&&a.forEach(((t,l)=>{if(t.path!==e)return;const n=a[l+1]||a[l-1];n&&S.push(n.path)})),this.tabsMenuList=a.filter((t=>t.path!==e))},
// Close MultipleTab
async closeMultipleTab(e){this.tabsMenuList=this.tabsMenuList.filter((t=>t.path===e||!t.close))},
// Set Tabs
async setTabs(e){this.tabsMenuList=e},
// Set Tabs Title
async setTabsTitle(e){const t=location.hash.substring(1);this.tabsMenuList.forEach((a=>{a.path==t&&(a.title=e)}))}},persist:D("wocwin-tabs")}),le=o({__name:"MoreButton",setup(e){const t=V(),a=z(),l=ae(),n=ee(),s=()=>{t.meta.isAffix||(l.removeTabs(t.fullPath),n.removeKeepAliveName(t.name))},o=()=>{l.closeMultipleTab(t.fullPath),n.setKeepAliveName([t.name])},r=()=>{l.closeMultipleTab(),n.setKeepAliveName(),a.push(R)};return(e,t)=>{const a=i("ArrowDown"),l=i("el-icon"),n=i("Remove"),f=i("el-dropdown-item"),v=i("CircleClose"),_=i("FolderDelete"),b=i("el-dropdown-menu"),h=i("el-dropdown");return u(),m(h,{trigger:"click",teleported:!1},{dropdown:d((()=>[c(b,null,{default:d((()=>[c(f,{onClick:s},{default:d((()=>[c(l,null,{default:d((()=>[c(n)])),_:1}),p(B(e.$t("tabs.closeCurrent")),1)])),_:1}),c(f,{onClick:o},{default:d((()=>[c(l,null,{default:d((()=>[c(v)])),_:1}),p(B(e.$t("tabs.closeOther")),1)])),_:1}),c(f,{onClick:r},{default:d((()=>[c(l,null,{default:d((()=>[c(_)])),_:1}),p(B(e.$t("tabs.closeAll")),1)])),_:1})])),_:1})])),default:d((()=>[c(l,null,{default:d((()=>[c(a)])),_:1})])),_:1})}}}),ne=o({__name:"Refresh",setup(e){const t=V(),a=ee(),l=f("refresh"),n=()=>{setTimeout((()=>{a.removeKeepAliveName(t.name),l(!1),b((()=>{a.addKeepAliveName(t.name),l(!0)}))}),0)};return(e,t)=>{const a=i("el-divider"),l=i("Refresh",!0),s=i("el-icon"),o=i("el-tooltip");return u(),r(_,null,[c(a,{direction:"vertical"}),v("div",{onClick:n,class:"tabs_icon"},[c(o,{effect:"dark",content:e.$t("tabs.refresh"),placement:"bottom"},{default:d((()=>[c(s,null,{default:d((()=>[c(l)])),_:1})])),_:1},8,["content"])]),c(a,{direction:"vertical"})],64)}}}),se=o({__name:"Maximize",setup(e){const t=s(),a=()=>{t.setGlobalState("maximize",!0)};return(e,t)=>{const l=i("el-divider"),n=i("FullScreen"),s=i("el-icon"),o=i("el-tooltip");return u(),r(_,null,[c(l,{direction:"vertical"}),v("div",{onClick:a,class:"tabs_icon"},[c(o,{effect:"dark",content:e.$t("tabs.maximize"),placement:"bottom"},{default:d((()=>[c(s,null,{default:d((()=>[c(n)])),_:1})])),_:1},8,["content"])])],64)}}}),oe=o({__name:"Contextmenu",props:{visible:{type:Boolean,required:!1},top:{type:Number,default:0},left:{type:Number,default:0}},setup(t){const a=V(),l=z(),n=ae(),s=ee(),o=()=>{a.meta.isAffix||(n.removeTabs(a.fullPath),s.removeKeepAliveName(a.name))},m=()=>{n.closeMultipleTab(a.fullPath),s.setKeepAliveName([a.name])},f=()=>{n.closeMultipleTab(),s.setKeepAliveName(),l.push(R)};return(a,l)=>{const n=i("Remove"),s=i("el-icon"),_=i("CircleClose"),b=i("FolderDelete");return h((u(),r("ul",{style:E({left:t.left+"px",top:t.top+"px"}),class:"contextmenu"},[v("li",{onClick:o},[c(s,null,{default:d((()=>[c(n)])),_:1}),p(B(a.$t("tabs.closeCurrent")),1)]),v("li",{onClick:m},[c(s,null,{default:d((()=>[c(_)])),_:1}),p(B(a.$t("tabs.closeOther")),1)]),v("li",{onClick:f},[c(s,null,{default:d((()=>[c(b)])),_:1}),p(B(a.$t("tabs.closeAll")),1)])],4)),[[e,t.visible]])}}}),ie={class:"tabs-box"},ue={class:"tabs-menu"},re={class:"right-tag"},ce=j(o({__name:"index",setup(t){const a=V(),l=z(),n=ae(),o=I(),f=s(),b=ee(),C=F(a.fullPath),A=k((()=>n.tabsMenuList)),L=k((()=>f.tabsIcon)),M=F(!1),T=F(0),N=F(0),j=()=>{M.value=!1};w(M,(e=>{e?document.body.addEventListener("click",j):document.body.removeEventListener("click",j)})),g((()=>{S(),D()})),w((()=>a.fullPath),(()=>{if(a.meta.isFull)return;C.value=a.fullPath;const e={icon:a.meta.icon,title:a.meta.title,path:a.fullPath,name:a.name,close:!a.meta.isAffix};n.addTabs(e),a.meta.isKeepAlive&&b.addKeepAliveName(a.name)}),{immediate:!0});const S=()=>{P.create(document.querySelector(".el-tabs__nav"),{draggable:".el-tabs__item",animation:300,onEnd({newIndex:e,oldIndex:t}){const a=[...n.tabsMenuList],l=a.splice(t,1)[0];a.splice(e,0,l),n.setTabs(a)}})},D=()=>{o.flatMenuListGet.forEach((e=>{if(e.meta.isAffix&&!e.meta.isHide&&!e.meta.isFull){const t={icon:e.meta.icon,title:e.meta.title,path:e.path,name:e.name,close:!e.meta.isAffix};n.addTabs(t)}}))},R=e=>{const t=e.props.name;l.push(t)},K=e=>{const t=n.tabsMenuList.filter((t=>t.path==e))[0].name||"";b.removeKeepAliveName(t),n.removeTabs(e,e==a.fullPath)};return(t,a)=>{const l=i("el-icon"),n=i("el-tab-pane"),s=i("el-tabs");return u(),r("div",ie,[v("div",ue,[c(s,{modelValue:G(C),"onUpdate:modelValue":a[0]||(a[0]=e=>U(C)?C.value=e:null),type:"card",onTabClick:R,onContextmenu:a[1]||(a[1]=e=>(e=>{e.preventDefault();const{clientX:t,clientY:a}=e;N.value=t,T.value=a+5,A.value.length<2?M.value=!1:M.value=!0})(e)),onTabRemove:K},{default:d((()=>[(u(!0),r(_,null,y(G(A),(t=>(u(),m(n,{key:t.path,label:t.title,name:t.path,closable:t.close},{label:d((()=>[h(c(l,{class:"tabs-icon"},{default:d((()=>[(u(),m(x(t.icon)))])),_:2},1536),[[e,t.icon&&G(L)]]),p(" "+B(t.title),1)])),_:2},1032,["label","name","closable"])))),128))])),_:1},8,["modelValue"]),v("div",re,[c(ne),c(le,{class:"tabs_icon"}),c(se)])]),c(oe,{visible:G(M),left:G(N),top:G(T)},null,8,["visible","left","top"])])}}}),[["__scopeId","data-v-d1ba5e45"]]),de=j(o({__name:"index",setup(e){const a=s(),{maximize:l,isCollapse:o,layout:p,tabs:f}=n(a),v=ee(),{keepAliveName:b}=n(v),h=F(!0);C("refresh",(e=>h.value=e)),w((()=>l.value),(()=>{const e=document.getElementById("app");l.value?e.classList.add("main-maximize"):e.classList.remove("main-maximize")}),{immediate:!0}),w((()=>p.value),(()=>{document.body.setAttribute("class",p.value)}),{immediate:!0});const k=F(0),g=q((()=>{k.value=document.body.clientWidth,!o.value&&k.value<1200&&a.setGlobalState("isCollapse",!0),o.value&&k.value>1200&&a.setGlobalState("isCollapse",!1)}),100);return window.addEventListener("resize",g,!1),A((()=>{window.removeEventListener("resize",g)})),(e,a)=>{const n=i("router-view"),s=i("el-main");return u(),r(_,null,[G(l)?(u(),m(te,{key:0})):L("",!0),G(f)?(u(),m(ce,{key:1})):L("",!0),c(s,null,{default:d((()=>[c(n,null,{default:d((({Component:e,route:a})=>[c(t,{appear:"",name:"fade-transform",mode:"out-in"},{default:d((()=>[(u(),m(M,{include:G(b)},[h.value?(u(),m(x(e),{key:a.fullPath})):L("",!0)],1032,["include"]))])),_:2},1024)])),_:1})])),_:1})],64)}}}),[["__scopeId","data-v-2908a6ab"]]),me=o({__name:"Language",setup(e){const t=O(),a=s(),l=k((()=>a.language)),n=[{label:"简体中文",value:"zh"},{label:"English",value:"en"}],o=e=>{t.locale.value=e,a.setGlobalState("language",e)};return(e,t)=>{const a=i("el-dropdown-item"),s=i("el-dropdown-menu"),f=i("el-dropdown");return u(),m(f,{trigger:"click",onCommand:o},{dropdown:d((()=>[c(s,null,{default:d((()=>[(u(),r(_,null,y(n,(e=>c(a,{key:e.value,command:e.value,disabled:G(l)===e.value},{default:d((()=>[p(B(e.label),1)])),_:2},1032,["command","disabled"]))),64))])),_:1})])),default:d((()=>[v("i",{class:$(["iconfont icon-zhongyingwen","toolBar-icon"])})])),_:1})}}}),pe={class:"menu-search-dialog"},fe=j(o({__name:"SearchMenu",setup(e){const t=z(),l=I(),n=k((()=>l.flatMenuListGet.filter((e=>!e.meta.isHide)))),s=(e,t)=>{t(e?n.value.filter(w(e)):n.value)},o=F(!1),p=F(),f=F(""),_=()=>{o.value=!0,b((()=>{setTimeout((()=>{p.value.focus()}))}))},h=()=>{o.value=!1},w=e=>t=>t.path.toLowerCase().indexOf(e.toLowerCase())>-1||t.meta.title.toLowerCase().indexOf(e.toLowerCase())>-1,g=e=>{f.value="",e.meta.isLink?window.open(e.meta.isLink,"_blank"):t.push(e.path),h()};return(e,t)=>{const l=i("el-icon"),n=i("el-autocomplete"),b=i("el-dialog");return u(),r("div",pe,[v("i",{onClick:_,class:$(["iconfont icon-search","toolBar-icon"])}),c(b,{modelValue:o.value,"onUpdate:modelValue":t[2]||(t[2]=e=>o.value=e),"destroy-on-close":"",modal:!1,"show-close":!1,fullscreen:"",onClick:h},{default:d((()=>[c(n,{modelValue:f.value,"onUpdate:modelValue":t[0]||(t[0]=e=>f.value=e),ref_key:"menuInputRef",ref:p,"value-key":"path",placeholder:"菜单搜索 ：支持菜单名称、路径","fetch-suggestions":s,onSelect:g,onClick:t[1]||(t[1]=a((()=>{}),["stop"]))},{prefix:d((()=>[c(l,null,{default:d((()=>[c(G(H))])),_:1})])),default:d((({item:e})=>[c(l,null,{default:d((()=>[(u(),m(x(e.meta.icon)))])),_:2},1024),v("span",null,B(e.meta.title),1)])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-d5ac5f14"]]),ve={class:"theme-setting",style:{cursor:"pointer"}},_e=o({__name:"ThemeSetting",setup(e){const t=()=>{Q.emit("openThemeDrawer")};return(e,a)=>(u(),r("div",ve,[v("i",{class:$(["iconfont icon-theme","toolBar-icon"]),onClick:t})]))}}),be={class:"fullscreen icon_full"},he=j(o({__name:"Fullscreen",setup(e){const{toggle:t,isFullscreen:a}=W();return(e,l)=>(u(),r("div",be,[v("i",{class:$([["iconfont",G(a)?"icon-exitfullscreen":"icon-fullscreen"],"toolBar-icon"]),onClick:l[0]||(l[0]=//@ts-ignore
(...e)=>G(t)&&G(t)(...e))},null,2)]))}}),[["__scopeId","data-v-f50f3430"]]),ke=v("span",null,"This is userInfo",-1),we={class:"dialog-footer"},ge=o({__name:"InfoDialog",setup(e,{expose:t}){const a=F(!1);return t({openDialog:()=>{a.value=!0}}),(e,t)=>{const l=i("el-button"),n=i("el-dialog");return u(),m(n,{modelValue:a.value,"onUpdate:modelValue":t[2]||(t[2]=e=>a.value=e),title:"个人信息",width:"500px",draggable:""},{footer:d((()=>[v("span",we,[c(l,{onClick:t[0]||(t[0]=e=>a.value=!1)},{default:d((()=>[p("取消")])),_:1}),c(l,{type:"primary",onClick:t[1]||(t[1]=e=>a.value=!1)},{default:d((()=>[p("确认")])),_:1})])])),default:d((()=>[ke])),_:1},8,["modelValue"])}}}),ye=v("span",null,"This is Password",-1),xe={class:"dialog-footer"},Ce=o({__name:"PasswordDialog",setup(e,{expose:t}){const a=F(!1);return t({openDialog:()=>{a.value=!0}}),(e,t)=>{const l=i("el-button"),n=i("el-dialog");return u(),m(n,{modelValue:a.value,"onUpdate:modelValue":t[2]||(t[2]=e=>a.value=e),title:"修改密码",width:"500px",draggable:""},{footer:d((()=>[v("span",xe,[c(l,{onClick:t[0]||(t[0]=e=>a.value=!1)},{default:d((()=>[p("取消")])),_:1}),c(l,{type:"primary",onClick:t[1]||(t[1]=e=>a.value=!1)},{default:d((()=>[p("确认")])),_:1})])])),default:d((()=>[ye])),_:1},8,["modelValue"])}}}),Ae=e=>(T("data-v-0b58b9bb"),e=e(),N(),e),Le=Ae((()=>v("div",{class:"avatar"},[
v("img",{src:X,alt:"avatar"})],-1))),Me=Ae((()=>v("a",{href:"https://wocwin.github.io/t-ui/",target:"_blank"},"vue2基础组件文档",-1))),Te=Ae((()=>v("a",{href:"https://wocwin.github.io/t-ui-plus/",target:"_blank"},"vue3基础组件文档",-1))),Ne=j(o({__name:"Avatar",setup(e){const t=K(),a=()=>{J.confirm("您是否确认退出登录?","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{await t.LogOut(),window.location.href=Y.__POWERED_BY_QIANKUN__?"/wocwin-qiankun/":"/wocwin-admin/",Z.success("退出登录成功！")}))},l=F(null),n=F(null),s=e=>{var t,a;"infoRef"==e&&(null==(t=l.value)||t.openDialog()),"passwordRef"==e&&(null==(a=n.value)||a.openDialog())};return(e,t)=>{const o=i("User"),m=i("el-icon"),f=i("el-dropdown-item"),v=i("Edit"),b=i("Memo"),h=i("SwitchButton"),k=i("el-dropdown-menu"),w=i("el-dropdown");return u(),r(_,null,[c(w,{trigger:"click"},{dropdown:d((()=>[c(k,{class:"user_info"},{default:d((()=>[c(f,{onClick:t[0]||(t[0]=e=>s("infoRef"))},{default:d((()=>[c(m,null,{default:d((()=>[c(o)])),_:1}),p(" "+B(e.$t("header.personalData")),1)])),_:1}),c(f,{onClick:t[1]||(t[1]=e=>s("passwordRef"))},{default:d((()=>[c(m,null,{default:d((()=>[c(v)])),_:1}),p(" "+B(e.$t("header.changePassword")),1)])),_:1}),c(f,null,{default:d((()=>[c(m,null,{default:d((()=>[c(b)])),_:1}),Me])),_:1}),c(f,null,{default:d((()=>[c(m,null,{default:d((()=>[c(b)])),_:1}),Te])),_:1}),c(f,{onClick:a,divided:""},{default:d((()=>[c(m,null,{default:d((()=>[c(h)])),_:1}),p(" "+B(e.$t("header.logout")),1)])),_:1})])),_:1})])),default:d((()=>[Le])),_:1}),c(ge,{ref_key:"infoRef",ref:l},null,512),c(Ce,{ref_key:"passwordRef",ref:n},null,512)],64)}}}),[["__scopeId","data-v-0b58b9bb"]]),je={class:"tool-bar-ri"},Se={class:"header-icon"},De={class:"username"},Re=j(o({__name:"ToolBarRight",setup(e){const t=K(),a=k((()=>t.name||"wocwin"));return(e,t)=>{const l=i("el-tooltip");return u(),r("div",je,[v("div",Se,[c(me,{id:"language"}),c(fe,{id:"searchMenu"}),c(l,{content:"主题切换",effect:"dark",placement:"bottom"},{default:d((()=>[c(_e,{id:"themeSetting"})])),_:1}),c(l,{content:"全屏预览",effect:"dark",placement:"bottom"},{default:d((()=>[c(he,{id:"fullscreen"})])),_:1})]),v("span",De,B(G(a)),1),c(Ne)])}}}),[["__scopeId","data-v-66569b01"]]),Ie={class:"sle"},Ke={class:"sle"},Pe=o({__name:"SubMenu",props:{menuList:null},setup(e){const t=z();return(a,l)=>{const n=i("el-icon"),s=i("SubMenu",!0),o=i("el-sub-menu"),p=i("el-menu-item");return u(!0),r(_,null,y(e.menuList,(e=>{var a;return u(),r(_,{key:e.path},[(null==(a=e.children)?void 0:a.length)?(u(),m(o,{key:0,index:e.path},{title:d((()=>[c(n,null,{default:d((()=>[(u(),m(x(e.meta.icon)))])),_:2},1024),v("span",Ie,B(e.meta.title),1)])),default:d((()=>[c(s,{menuList:e.children},null,8,["menuList"])])),_:2},1032,["index"])):(u(),m(p,{key:1,index:e.path,onClick:a=>(e=>{if(e.meta.isLink)return window.open(e.meta.isLink,"_blank");t.push(e.path)})(e)},{title:d((()=>[v("span",Ke,B(e.meta.title),1)])),default:d((()=>[c(n,null,{default:d((()=>[(u(),m(x(e.meta.icon)))])),_:2},1024)])),_:2},1032,["index","onClick"]))],64)})),128)}}});export{de as M,Re as T,Pe as _};
