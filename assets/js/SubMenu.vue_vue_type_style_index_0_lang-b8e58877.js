import{v as e,T as t,w as a}from"./@vue_runtime-dom@3.2.47-7b31c7d0.js";import{d as l,s as n}from"./pinia@2.0.33_typescript@5.0.4_vue@3.2.47-b4bca346.js";import{b as s,_ as o,r as i,p as u,H as r,a as c,u as d}from"./index-6214238a.js";import{e as m,Z as p,o as f,a as v,c as _,Q as b,P as h,J as k,y as w,b as g,F as y,n as C,D as x,t as A,q as L,f as M,X as T,R as N,z as j,G as R,U as S,a1 as V,am as I,al as K}from"./@vue_runtime-core@3.2.47-ac740756.js";import{S as P}from"./sortablejs@1.15.0-c3bad686.js";import{b as z,u as D}from"./vue-router@4.1.6_vue@3.2.47-86cdb6f8.js";import{O as E,s as B,q as $}from"./@vue_shared@3.2.47-177e1703.js";import{r as F,u as G,i as U}from"./@vue_reactivity@3.2.47-31538bbf.js";import{k as q}from"./@vueuse_shared@9.13.0_vue@3.2.47-ba8084b7.js";import{u as O}from"./vue-i18n@9.2.2_vue@3.2.47-cb4378dc.js";import{M as H}from"./@element-plus_icons-vue@2.1.0_vue@3.2.47-b4249e9e.js";import{m as Q}from"./indexAsync-799efcaa.js";import{j as W}from"./@vueuse_core@9.13.0_vue@3.2.47-a7f0bdd9.js";import{_ as X}from"./logo-05fb951c.js";import{q as Y}from"./vite-plugin-qiankun@1.0.15_typescript@5.0.4_vite@4.3.9-f25e2b71.js";import{b as J,a as Z}from"./element-plus@2.4.2_vue@3.2.47-cedc29d1.js";const ee=l({id:"wocwin-keepAlive",state:()=>({keepAliveName:[]}),actions:{
// Add KeepAliveName
async addKeepAliveName(e){!this.keepAliveName.includes(e)&&this.keepAliveName.push(e)},
// Remove KeepAliveName
async removeKeepAliveName(e){this.keepAliveName=this.keepAliveName.filter((t=>t!==e))},
// Set KeepAliveName
async setKeepAliveName(e=[]){this.keepAliveName=e}}}),te=o(m({__name:"Maximize",setup(e){const t=s(),a=()=>{t.setGlobalState("maximize",!1)};return(e,t)=>{const l=p("Close"),n=p("el-icon");return f(),v("div",{class:"maximize",onClick:a},[_(n,null,{default:b((()=>[_(l)])),_:1})])}}}),[["__scopeId","data-v-e5bd432e"]]),ae=l({id:"wocwin-tabs",state:()=>({tabsMenuList:[]}),actions:{
// Add Tabs
async addTabs(e){this.tabsMenuList.every((t=>t.path!==e.path))&&this.tabsMenuList.push(e)},
// Remove Tabs
async removeTabs(e,t=!0){const a=this.tabsMenuList;t&&a.forEach(((t,l)=>{if(t.path!==e)return;const n=a[l+1]||a[l-1];n&&i.push(n.path)})),this.tabsMenuList=a.filter((t=>t.path!==e))},
// Close MultipleTab
async closeMultipleTab(e){this.tabsMenuList=this.tabsMenuList.filter((t=>t.path===e||!t.close))},
// Set Tabs
async setTabs(e){this.tabsMenuList=e},
// Set Tabs Title
async setTabsTitle(e){const t=location.hash.substring(1);this.tabsMenuList.forEach((a=>{a.path==t&&(a.title=e)}))}},persist:u("wocwin-tabs")}),le=m({__name:"MoreButton",setup(e){const t=z(),a=D(),l=ae(),n=ee(),s=()=>{t.meta.isAffix||(l.removeTabs(t.fullPath),n.removeKeepAliveName(t.name))},o=()=>{l.closeMultipleTab(t.fullPath),n.setKeepAliveName([t.name])},i=()=>{l.closeMultipleTab(),n.setKeepAliveName(),a.push(r)};return(e,t)=>{const a=p("ArrowDown"),l=p("el-icon"),n=p("Remove"),u=p("el-dropdown-item"),r=p("CircleClose"),c=p("FolderDelete"),d=p("el-dropdown-menu"),m=p("el-dropdown");return f(),h(m,{trigger:"click",teleported:!1},{dropdown:b((()=>[_(d,null,{default:b((()=>[_(u,{onClick:s},{default:b((()=>[_(l,null,{default:b((()=>[_(n)])),_:1}),k(E(e.$t("tabs.closeCurrent")),1)])),_:1}),_(u,{onClick:o},{default:b((()=>[_(l,null,{default:b((()=>[_(r)])),_:1}),k(E(e.$t("tabs.closeOther")),1)])),_:1}),_(u,{onClick:i},{default:b((()=>[_(l,null,{default:b((()=>[_(c)])),_:1}),k(E(e.$t("tabs.closeAll")),1)])),_:1})])),_:1})])),default:b((()=>[_(l,null,{default:b((()=>[_(a)])),_:1})])),_:1})}}}),ne=m({__name:"Refresh",setup(e){const t=z(),a=ee(),l=w("refresh"),n=()=>{setTimeout((()=>{a.removeKeepAliveName(t.name),l(!1),C((()=>{a.addKeepAliveName(t.name),l(!0)}))}),0)};return(e,t)=>{const a=p("el-divider"),l=p("Refresh",!0),s=p("el-icon"),o=p("el-tooltip");return f(),v(y,null,[_(a,{direction:"vertical"}),g("div",{onClick:n,class:"tabs_icon"},[_(o,{effect:"dark",content:e.$t("tabs.refresh"),placement:"bottom"},{default:b((()=>[_(s,null,{default:b((()=>[_(l)])),_:1})])),_:1},8,["content"])]),_(a,{direction:"vertical"})],64)}}}),se=m({__name:"Maximize",setup(e){const t=s(),a=()=>{t.setGlobalState("maximize",!0)};return(e,t)=>{const l=p("el-divider"),n=p("FullScreen"),s=p("el-icon"),o=p("el-tooltip");return f(),v(y,null,[_(l,{direction:"vertical"}),g("div",{onClick:a,class:"tabs_icon"},[_(o,{effect:"dark",content:e.$t("tabs.maximize"),placement:"bottom"},{default:b((()=>[_(s,null,{default:b((()=>[_(n)])),_:1})])),_:1},8,["content"])])],64)}}}),oe=m({__name:"Contextmenu",props:{visible:{type:Boolean,required:!1},top:{type:Number,default:0},left:{type:Number,default:0}},setup(t){const a=z(),l=D(),n=ae(),s=ee(),o=()=>{a.meta.isAffix||(n.removeTabs(a.fullPath),s.removeKeepAliveName(a.name))},i=()=>{n.closeMultipleTab(a.fullPath),s.setKeepAliveName([a.name])},u=()=>{n.closeMultipleTab(),s.setKeepAliveName(),l.push(r)};return(a,l)=>{const n=p("Remove"),s=p("el-icon"),r=p("CircleClose"),c=p("FolderDelete");return x((f(),v("ul",{style:B({left:t.left+"px",top:t.top+"px"}),class:"contextmenu"},[g("li",{onClick:o},[_(s,null,{default:b((()=>[_(n)])),_:1}),k(E(a.$t("tabs.closeCurrent")),1)]),g("li",{onClick:i},[_(s,null,{default:b((()=>[_(r)])),_:1}),k(E(a.$t("tabs.closeOther")),1)]),g("li",{onClick:u},[_(s,null,{default:b((()=>[_(c)])),_:1}),k(E(a.$t("tabs.closeAll")),1)])],4)),[[e,t.visible]])}}}),ie={class:"tabs-box"},ue={class:"tabs-menu"},re={class:"right-tag"},ce=o(m({__name:"index",setup(t){const a=z(),l=D(),n=ae(),o=c(),i=s(),u=ee(),r=F(a.fullPath),d=A((()=>n.tabsMenuList)),m=A((()=>i.tabsIcon)),w=F(!1),C=F(0),j=F(0),R=()=>{w.value=!1};L(w,(e=>{e?document.body.addEventListener("click",R):document.body.removeEventListener("click",R)})),M((()=>{S(),V()})),L((()=>a.fullPath),(()=>{if(a.meta.isFull)return;r.value=a.fullPath;const e={icon:a.meta.icon,title:a.meta.title,path:a.fullPath,name:a.name,close:!a.meta.isAffix};n.addTabs(e),a.meta.isKeepAlive&&u.addKeepAliveName(a.name)}),{immediate:!0});const S=()=>{P.create(document.querySelector(".el-tabs__nav"),{draggable:".el-tabs__item",animation:300,onEnd({newIndex:e,oldIndex:t}){const a=[...n.tabsMenuList],l=a.splice(t,1)[0];a.splice(e,0,l),n.setTabs(a)}})},V=()=>{o.flatMenuListGet.forEach((e=>{if(e.meta.isAffix&&!e.meta.isHide&&!e.meta.isFull){const t={icon:e.meta.icon,title:e.meta.title,path:e.path,name:e.name,close:!e.meta.isAffix};n.addTabs(t)}}))},I=e=>{const t=e.props.name;l.push(t)},K=e=>{const t=n.tabsMenuList.filter((t=>t.path==e))[0].name||"";u.removeKeepAliveName(t),n.removeTabs(e,e==a.fullPath)};return(t,a)=>{const l=p("el-icon"),n=p("el-tab-pane"),s=p("el-tabs");return f(),v("div",ie,[g("div",ue,[_(s,{modelValue:G(r),"onUpdate:modelValue":a[0]||(a[0]=e=>U(r)?r.value=e:null),type:"card",onTabClick:I,onContextmenu:a[1]||(a[1]=e=>(e=>{e.preventDefault();const{clientX:t,clientY:a}=e;j.value=t,C.value=a+5,d.value.length<2?w.value=!1:w.value=!0})(e)),onTabRemove:K},{default:b((()=>[(f(!0),v(y,null,T(G(d),(t=>(f(),h(n,{key:t.path,label:t.title,name:t.path,closable:t.close},{label:b((()=>[x(_(l,{class:"tabs-icon"},{default:b((()=>[(f(),h(N(t.icon)))])),_:2},1536),[[e,t.icon&&G(m)]]),k(" "+E(t.title),1)])),_:2},1032,["label","name","closable"])))),128))])),_:1},8,["modelValue"]),g("div",re,[_(ne),_(le,{class:"tabs_icon"}),_(se)])]),_(oe,{visible:G(w),left:G(j),top:G(C)},null,8,["visible","left","top"])])}}}),[["__scopeId","data-v-d1ba5e45"]]),de=o(m({__name:"index",setup(e){const a=s(),{maximize:l,isCollapse:o,layout:i,tabs:u}=n(a),r=ee(),{keepAliveName:c}=n(r),d=F(!0);j("refresh",(e=>d.value=e)),L((()=>l.value),(()=>{const e=document.getElementById("app");l.value?e.classList.add("main-maximize"):e.classList.remove("main-maximize")}),{immediate:!0}),L((()=>i.value),(()=>{document.body.setAttribute("class",i.value)}),{immediate:!0});const m=F(0),k=q((()=>{m.value=document.body.clientWidth,!o.value&&m.value<1200&&a.setGlobalState("isCollapse",!0),o.value&&m.value>1200&&a.setGlobalState("isCollapse",!1)}),100);return window.addEventListener("resize",k,!1),R((()=>{window.removeEventListener("resize",k)})),(e,a)=>{const n=p("router-view"),s=p("el-main");return f(),v(y,null,[G(l)?(f(),h(te,{key:0})):S("",!0),G(u)?(f(),h(ce,{key:1})):S("",!0),_(s,null,{default:b((()=>[_(n,null,{default:b((({Component:e,route:a})=>[_(t,{appear:"",name:"fade-transform",mode:"out-in"},{default:b((()=>[(f(),h(V,{include:G(c)},[d.value?(f(),h(N(e),{key:a.fullPath})):S("",!0)],1032,["include"]))])),_:2},1024)])),_:1})])),_:1})],64)}}}),[["__scopeId","data-v-53a484aa"]]),me=m({__name:"Language",setup(e){const t=O(),a=s(),l=A((()=>a.language)),n=[{label:"简体中文",value:"zh"},{label:"English",value:"en"}],o=e=>{t.locale.value=e,a.setGlobalState("language",e)};return(e,t)=>{const a=p("el-dropdown-item"),s=p("el-dropdown-menu"),i=p("el-dropdown");return f(),h(i,{trigger:"click",onCommand:o},{dropdown:b((()=>[_(s,null,{default:b((()=>[(f(),v(y,null,T(n,(e=>_(a,{key:e.value,command:e.value,disabled:G(l)===e.value},{default:b((()=>[k(E(e.label),1)])),_:2},1032,["command","disabled"]))),64))])),_:1})])),default:b((()=>[g("i",{class:$(["iconfont icon-zhongyingwen","toolBar-icon"])})])),_:1})}}}),pe={class:"menu-search-dialog"},fe=o(m({__name:"SearchMenu",setup(e){const t=D(),l=c(),n=A((()=>l.flatMenuListGet.filter((e=>!e.meta.isHide)))),s=(e,t)=>{t(e?n.value.filter(m(e)):n.value)},o=F(!1),i=F(),u=F(""),r=()=>{o.value=!0,C((()=>{setTimeout((()=>{i.value.focus()}))}))},d=()=>{o.value=!1},m=e=>t=>t.path.toLowerCase().indexOf(e.toLowerCase())>-1||t.meta.title.toLowerCase().indexOf(e.toLowerCase())>-1,k=e=>{u.value="",e.meta.isLink?window.open(e.meta.isLink,"_blank"):t.push(e.path),d()};return(e,t)=>{const l=p("el-icon"),n=p("el-autocomplete"),c=p("el-dialog");return f(),v("div",pe,[g("i",{onClick:r,class:$(["iconfont icon-search","toolBar-icon"])}),_(c,{modelValue:o.value,"onUpdate:modelValue":t[2]||(t[2]=e=>o.value=e),"destroy-on-close":"",modal:!1,"show-close":!1,fullscreen:"",onClick:d},{default:b((()=>[_(n,{modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=e=>u.value=e),ref_key:"menuInputRef",ref:i,"value-key":"path",placeholder:"菜单搜索 ：支持菜单名称、路径","fetch-suggestions":s,onSelect:k,onClick:t[1]||(t[1]=a((()=>{}),["stop"]))},{prefix:b((()=>[_(l,null,{default:b((()=>[_(G(H))])),_:1})])),default:b((({item:e})=>[_(l,null,{default:b((()=>[(f(),h(N(e.meta.icon)))])),_:2},1024),g("span",null,E(e.meta.title),1)])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-d5ac5f14"]]),ve={class:"theme-setting",style:{cursor:"pointer"}},_e=m({__name:"ThemeSetting",setup(e){const t=()=>{Q.emit("openThemeDrawer")};return(e,a)=>(f(),v("div",ve,[g("i",{class:$(["iconfont icon-theme","toolBar-icon"]),onClick:t})]))}}),be={class:"fullscreen icon_full"},he=o(m({__name:"Fullscreen",setup(e){const{toggle:t,isFullscreen:a}=W();return(e,l)=>(f(),v("div",be,[g("i",{class:$([["iconfont",G(a)?"icon-exitfullscreen":"icon-fullscreen"],"toolBar-icon"]),onClick:l[0]||(l[0]=//@ts-ignore
(...e)=>G(t)&&G(t)(...e))},null,2)]))}}),[["__scopeId","data-v-f50f3430"]]),ke=g("span",null,"This is userInfo",-1),we={class:"dialog-footer"},ge=m({__name:"InfoDialog",setup(e,{expose:t}){const a=F(!1);return t({openDialog:()=>{a.value=!0}}),(e,t)=>{const l=p("el-button"),n=p("el-dialog");return f(),h(n,{modelValue:a.value,"onUpdate:modelValue":t[2]||(t[2]=e=>a.value=e),title:"个人信息",width:"500px",draggable:""},{footer:b((()=>[g("span",we,[_(l,{onClick:t[0]||(t[0]=e=>a.value=!1)},{default:b((()=>[k("取消")])),_:1}),_(l,{type:"primary",onClick:t[1]||(t[1]=e=>a.value=!1)},{default:b((()=>[k("确认")])),_:1})])])),default:b((()=>[ke])),_:1},8,["modelValue"])}}}),ye=g("span",null,"This is Password",-1),Ce={class:"dialog-footer"},xe=m({__name:"PasswordDialog",setup(e,{expose:t}){const a=F(!1);return t({openDialog:()=>{a.value=!0}}),(e,t)=>{const l=p("el-button"),n=p("el-dialog");return f(),h(n,{modelValue:a.value,"onUpdate:modelValue":t[2]||(t[2]=e=>a.value=e),title:"修改密码",width:"500px",draggable:""},{footer:b((()=>[g("span",Ce,[_(l,{onClick:t[0]||(t[0]=e=>a.value=!1)},{default:b((()=>[k("取消")])),_:1}),_(l,{type:"primary",onClick:t[1]||(t[1]=e=>a.value=!1)},{default:b((()=>[k("确认")])),_:1})])])),default:b((()=>[ye])),_:1},8,["modelValue"])}}}),Ae=e=>(I("data-v-0b58b9bb"),e=e(),K(),e),Le=Ae((()=>g("div",{class:"avatar"},[
g("img",{src:X,alt:"avatar"})],-1))),Me=Ae((()=>g("a",{href:"https://wocwin.github.io/t-ui/",target:"_blank"},"vue2基础组件文档",-1))),Te=Ae((()=>g("a",{href:"https://wocwin.github.io/t-ui-plus/",target:"_blank"},"vue3基础组件文档",-1))),Ne=o(m({__name:"Avatar",setup(e){const t=d(),a=()=>{J.confirm("您是否确认退出登录?","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{await t.LogOut(),window.location.href=Y.__POWERED_BY_QIANKUN__?"/wocwin-qiankun/":"/wocwin-admin/",Z.success("退出登录成功！")}))},l=F(null),n=F(null),s=e=>{var t,a;"infoRef"==e&&(null==(t=l.value)||t.openDialog()),"passwordRef"==e&&(null==(a=n.value)||a.openDialog())};return(e,t)=>{const o=p("User"),i=p("el-icon"),u=p("el-dropdown-item"),r=p("Edit"),c=p("Memo"),d=p("SwitchButton"),m=p("el-dropdown-menu"),h=p("el-dropdown");return f(),v(y,null,[_(h,{trigger:"click"},{dropdown:b((()=>[_(m,{class:"user_info"},{default:b((()=>[_(u,{onClick:t[0]||(t[0]=e=>s("infoRef"))},{default:b((()=>[_(i,null,{default:b((()=>[_(o)])),_:1}),k(" "+E(e.$t("header.personalData")),1)])),_:1}),_(u,{onClick:t[1]||(t[1]=e=>s("passwordRef"))},{default:b((()=>[_(i,null,{default:b((()=>[_(r)])),_:1}),k(" "+E(e.$t("header.changePassword")),1)])),_:1}),_(u,null,{default:b((()=>[_(i,null,{default:b((()=>[_(c)])),_:1}),Me])),_:1}),_(u,null,{default:b((()=>[_(i,null,{default:b((()=>[_(c)])),_:1}),Te])),_:1}),_(u,{onClick:a,divided:""},{default:b((()=>[_(i,null,{default:b((()=>[_(d)])),_:1}),k(" "+E(e.$t("header.logout")),1)])),_:1})])),_:1})])),default:b((()=>[Le])),_:1}),_(ge,{ref_key:"infoRef",ref:l},null,512),_(xe,{ref_key:"passwordRef",ref:n},null,512)],64)}}}),[["__scopeId","data-v-0b58b9bb"]]),je={class:"tool-bar-ri"},Re={class:"header-icon"},Se={class:"username"},Ve=o(m({__name:"ToolBarRight",setup(e){const t=d(),a=A((()=>t.name||"wocwin"));return(e,t)=>{const l=p("el-tooltip");return f(),v("div",je,[g("div",Re,[_(me,{id:"language"}),_(fe,{id:"searchMenu"}),_(l,{content:"主题切换",effect:"dark",placement:"bottom"},{default:b((()=>[_(_e,{id:"themeSetting"})])),_:1}),_(l,{content:"全屏预览",effect:"dark",placement:"bottom"},{default:b((()=>[_(he,{id:"fullscreen"})])),_:1})]),g("span",Se,E(G(a)),1),_(Ne)])}}}),[["__scopeId","data-v-66569b01"]]),Ie={class:"sle"},Ke={class:"sle"},Pe=m({__name:"SubMenu",props:{menuList:null},setup(e){const t=D();return(a,l)=>{const n=p("el-icon"),s=p("SubMenu",!0),o=p("el-sub-menu"),i=p("el-menu-item");return f(!0),v(y,null,T(e.menuList,(e=>{var a;return f(),v(y,{key:e.path},[(null==(a=e.children)?void 0:a.length)?(f(),h(o,{key:0,index:e.path},{title:b((()=>[_(n,null,{default:b((()=>[(f(),h(N(e.meta.icon)))])),_:2},1024),g("span",Ie,E(e.meta.title),1)])),default:b((()=>[_(s,{menuList:e.children},null,8,["menuList"])])),_:2},1032,["index"])):(f(),h(i,{key:1,index:e.path,onClick:a=>(e=>{if(e.meta.isLink)return window.open(e.meta.isLink,"_blank");t.push(e.path)})(e)},{title:b((()=>[g("span",Ke,E(e.meta.title),1)])),default:b((()=>[_(n,null,{default:b((()=>[(f(),h(N(e.meta.icon)))])),_:2},1024)])),_:2},1032,["index","onClick"]))],64)})),128)}}});export{de as M,Ve as T,Pe as _};
